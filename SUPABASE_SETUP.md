# üöÄ Supabase Setup Guide ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Robot Control System

## üìã ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Supabase

### 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á Supabase Project

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà [Supabase Dashboard](https://supabase.com/dashboard)
2. ‡∏Ñ‡∏•‡∏¥‡∏Å **"New Project"**
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Organization ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
4. ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
   - **Name**: `robot-control-system`
   - **Database Password**: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á
   - **Region**: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏Å‡∏•‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ Southeast Asia)
5. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Create new project"**
6. ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡∏à‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Database Schema

1. ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ Supabase ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **SQL Editor**
2. ‡∏Ñ‡∏•‡∏¥‡∏Å **"New query"**
3. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î SQL ‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå `database/schema.sql`
4. ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô SQL Editor ‡πÅ‡∏•‡∏∞‡∏Å‡∏î **"Run"**
5. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÉ‡∏ô **Table Editor**

### 3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables

1. ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ Supabase ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Settings** > **API**
2. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å:
   - **Project URL** (URL)
   - **anon public** key (API Key)

3. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏ü‡∏•‡πå `.env.local`:

```env
# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
```

**‚ö†Ô∏è ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡πà‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì**

### 4. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Authentication

1. ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ Supabase ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Authentication** > **Settings**
2. ‡πÉ‡∏ô **Site URL** ‡πÉ‡∏™‡πà: `http://localhost:3000`
3. ‡πÉ‡∏ô **Redirect URLs** ‡πÄ‡∏û‡∏¥‡πà‡∏°:
   - `http://localhost:3000`
   - `http://localhost:3000/auth/callback`

### 5. ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Realtime (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö real-time updates)

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Database** > **Replication**
2. ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô realtime ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á:
   - `robot_status`
   - `alerts`
   - `analytics_data`

## üß™ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### 1. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠

```bash
npm run dev
```

### 2. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å

1. ‡πÄ‡∏õ‡∏¥‡∏î http://localhost:3000
2. ‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å"
3. ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏•‡∏≠‡∏á‡∏™‡∏°‡∏±‡∏Ñ‡∏£
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏ô Supabase Dashboard > **Authentication** > **Users**

### 3. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö

1. ‡πÉ‡∏ä‡πâ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÑ‡∏ß‡πâ
2. ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
3. ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤ Dashboard ‡πÑ‡∏î‡πâ

## üìä ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö:

```sql
-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏ó‡∏î‡∏™‡∏≠‡∏ö (‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà 'user-id' ‡∏î‡πâ‡∏ß‡∏¢ ID ‡∏à‡∏£‡∏¥‡∏á)
INSERT INTO public.robots (user_id, name, type, location, status) VALUES
('user-id-here', 'Robot Alpha', 'delivery', '‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ A ‡∏ä‡∏±‡πâ‡∏ô 1', 'online'),
('user-id-here', 'Robot Beta', 'security', '‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ A ‡∏ä‡∏±‡πâ‡∏ô 2', 'online'),
('user-id-here', 'Robot Gamma', 'cleaning', '‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ B ‡∏ä‡∏±‡πâ‡∏ô 1', 'maintenance');

-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå
INSERT INTO public.robot_status (robot_id, battery_level, temperature, network_quality, cpu_usage, memory_usage) VALUES
('robot-id-here', 85, 42.5, 88, 25.5, 64.2);

-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
INSERT INTO public.alerts (robot_id, user_id, type, title, message, priority) VALUES
('robot-id-here', 'user-id-here', 'warning', '‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà‡∏ï‡πà‡∏≥', '‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 15%', 'high'),
('robot-id-here', 'user-id-here', 'info', '‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô', '‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß', 'medium');
```

## üîß ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢:

1. **"Invalid API key"**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `.env.local` ‡∏ß‡πà‡∏≤‡∏Ñ‡∏µ‡∏¢‡πå‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
   - Restart development server

2. **"Row Level Security violation"**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö RLS policies ‡πÉ‡∏ô database
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß

3. **"Cannot connect to database"**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Supabase project URL
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï

### ‡∏Å‡∏≤‡∏£‡∏î‡∏π Logs:

- **Authentication logs**: Supabase Dashboard > **Logs** > **Auth**
- **Database logs**: Supabase Dashboard > **Logs** > **Database**
- **Realtime logs**: Supabase Dashboard > **Logs** > **Realtime**

## üöÄ Production Setup

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏° deploy:

1. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï **Site URL** ‡πÅ‡∏•‡∏∞ **Redirect URLs** ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Auth
2. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï environment variables ‡πÉ‡∏ô production
3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ custom domain (optional)
4. ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô backup scheduling

## üìö Resources

- [Supabase Documentation](https://supabase.com/docs)
- [Supabase Auth with Next.js](https://supabase.com/docs/guides/auth/auth-helpers/nextjs)
- [Row Level Security Guide](https://supabase.com/docs/guides/auth/row-level-security)

---

**üéâ ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß! ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Login ‡πÅ‡∏•‡∏∞ Database ‡πÅ‡∏•‡πâ‡∏ß**
